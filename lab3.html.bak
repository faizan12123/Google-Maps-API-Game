<!DOCTYPE html>
<html lang="en">
<head>


    <style>

 #map {
    margin-left: 5%;
    margin-right: 3%;
    margin-top: 5%;
  height: 800px;
  width: 650px;
  
}

 html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        width: 100%;
        background-color: black;
  }

.quiz_box{
  border: 10px solid orange;
  float: right;
  background-color: black;
  color: white;
  margin-right: 10%; 
  margin-left: 3%;
  margin-top: 10%;
  font-size: 25px;
  margin-bottom:10%;
  padding:5%
  
}


.score{
    
  Text-align: center;
  color: white;
  margin-bottom: 10%;
  font-size: 25px;
  animation: loadTransition 3s;
}

@keyframes loadTransition{

    0%   { 
 transform: translateX(200%); 		
 }
 100% { 
 transform: translateX(0%); 
 }
}

.play_again{
  background-color: white;
  color:black;
  margin-top: 10%;
  margin-left: 40%;
}









    </style>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"> </script> 
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3srrE7OGsBmuLf0uJqm8gqtgzxu2swLU&callback=initMap&v=weekly&libraries=geometry&libraries=places"
      defer
    ></script>
    
    <script>
      let map;
      function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 34.2407, lng: -118.5300},
        mapId:"6e3bde3c52bebc4f",
        draggable: false,
        zoom: 17,
        minZoom: 17,
        maxZoom: 17,
        disableDefaultUI: true,
        scrollwheel: false,
        disableDoubleClickZoom: false,
        gestureHandling: 'none',
  });

  let questionsDom = document.getElementById('quiz_question')
  let score = document.getElementById('score')
  let playAgain = document.getElementById('play_again')
  score.style.display = "none"
  playAgain.style.visibility = 'hidden';
  let questionState =0
  scoreCount = 0;
  clickPositionLat = 0
  clickPositionLng = 0
 


  const questionsObject = [
    {
    id: 1,
    q: "Where is Jacaranda Hall?",
    a: [
    { north: 34.242086 ,
    south: 34.2410354040651,
    west: -118.52946699572256,
    east: -118.52785230608457}
      ]
    },
    {
    id: 2,
    q: "Where is Bayramian Hall?",
    a: [
    { north: 34.24068938183726 ,
    south: 34.23990886569187,
    west: -118.53145040261947,
    east:-118.53019366016106}
      ]
    },
    {
    id: 3,
    q: "Where is Live Oak Hall?",
    a: [
    {north: 34.23837924222238,
    south: 34.23817743512075,
    west: -118.5288036456684,
    east: -118.52763533516443}
      ]
    },
    {
    id: 4,
    q: "Where is Magnolia Hall?",
    a: [
    {north: 34.23966180192036,
    south: 34.239207106958624,
    west:-118.52842053087718,
    east: -118.52815121254673}
      ]
    },
    {
    id: 5,
    q: "Where is Arbor Court?",
    a: [
    {north: 34.24133228247873,
    south: 34.240959375243605,
    west: -118.5301021864002,
    east: -118.5295518542379}
      ]
    },
  ]


  function questionIterator(i){
    questionsDom.innerText = "Question " + questionsObject[i].id + ": " + questionsObject[i].q
  }
  questionIterator(0)


function rectangleBuilderCorrect(i){
    new google.maps.Rectangle({
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillOpacity: 0.1,
            strokeColor: "#008000",
            fillColor: "#008000",
            map: map,
            bounds: {
                north: questionsObject[i].a[0].north,
                south: questionsObject[i].a[0].south,
                east: questionsObject[i].a[0].east,
                west: questionsObject[i].a[0].west
            }
        });  
}

function rectangleBuilderFalse(i){
    new google.maps.Rectangle({
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillOpacity: 0.1, 
            strokeColor: "#FF0000",
            fillColor: "#FF0000",
            map: map,
            bounds: {
                north: questionsObject[i].a[0].north,
                south: questionsObject[i].a[0].south,
                east: questionsObject[i].a[0].east,
                west: questionsObject[i].a[0].west
            }
        });  
}

  map.addListener("dblclick", function(e) {
    
    if(questionState<=4){
        if(questionState==0){
            if (e.latLng.lng()>= questionsObject[questionState].a[0].west && e.latLng.lng() <= questionsObject[questionState].a[0].east && e.latLng.lat()>= questionsObject[questionState].a[0].south && e.latLng.lat() <= questionsObject[questionState].a[0].north) {
                console.log("here")    
                rectangleBuilderCorrect(questionState)
                scoreCount++
            } else {
                console.log("false occured 1")
                rectangleBuilderFalse(questionState)
            }
        }
        if(questionState==1){
            if (e.latLng.lng()>= questionsObject[questionState].a[0].west && e.latLng.lng() <= questionsObject[questionState].a[0].east && e.latLng.lat()>= questionsObject[questionState].a[0].south && e.latLng.lat() <= questionsObject[questionState].a[0].north) {
                console.log("here")    
                rectangleBuilderCorrect(questionState)
                scoreCount++
            } else {
                console.log("false occured 2")
                rectangleBuilderFalse(questionState)
            }
        }
        if(questionState==2){
            if (e.latLng.lng()>= questionsObject[questionState].a[0].west && e.latLng.lng() <= questionsObject[questionState].a[0].east && e.latLng.lat()>= questionsObject[questionState].a[0].south && e.latLng.lat() <= questionsObject[questionState].a[0].north) {
                console.log("here")    
                rectangleBuilderCorrect(questionState)
                scoreCount++
            } else {
                console.log("false occured 3")
                rectangleBuilderFalse(questionState)
            }
        }
        if(questionState==3){
            if (e.latLng.lng()>= questionsObject[questionState].a[0].west && e.latLng.lng() <= questionsObject[questionState].a[0].east && e.latLng.lat()>= questionsObject[questionState].a[0].south && e.latLng.lat() <= questionsObject[questionState].a[0].north) {
                console.log("here")    
                rectangleBuilderCorrect(questionState)
                scoreCount++
            } else {
                console.log("false occured 4")
                rectangleBuilderFalse(questionState)
            }
        }
        if(questionState==4){
            if (e.latLng.lng()>= questionsObject[questionState].a[0].west && e.latLng.lng() <= questionsObject[questionState].a[0].east && e.latLng.lat()>= questionsObject[questionState].a[0].south && e.latLng.lat() <= questionsObject[questionState].a[0].north) {
                console.log("here")    
                rectangleBuilderCorrect(questionState)
                scoreCount++
            } else {
                console.log("false occured 5")
                rectangleBuilderFalse(questionState)
            }
        }
      

      questionState += 1
        clickPositionLat = e.latLng.lat()
        clickPositionLng = e.latLng.lng()
        console.log(clickPositionLat)
        console.log(clickPositionLng)
        
    }

    if(questionState == 5) {
      console.log("finished")
      playAgain.style.visibility = "visible"
      score.style.display = "block"
      score.innerText = ("Score: " + scoreCount + "/5")
    }
    if (questionState <=4) {
        questionIterator(questionState)
    }
    
})



playAgain.addEventListener("click", function(e){
  scoreCount = 0;
  questionState = 0;
  questionIterator(questionState)
  score.style.display = "none"
  playAgain.style.visibility = "hidden"
  location.reload()
})

}

window.initMap = initMap;


    </script>


</head>





<body>
  <!-- <div class="parent_div"> -->

    
    <div id="quiz_box" class = "quiz_box">
        <div id="score" class= "score"></div>
      <div id="quiz_question" class="quiz_question"></div>
      <button id="play_again" class="play_again">Play Again</button>
    </div>
    

    </div>
    <div id="map"></div>

    


  <!-- </div> -->

</body>
</html>